(this["webpackJsonptravel-frontend"]=this["webpackJsonptravel-frontend"]||[]).push([[0],{113:function(e,t,a){e.exports=a(176)},118:function(e,t,a){},123:function(e,t,a){},160:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(27),c=a.n(l),s=(a(118),a(52)),o=a(13),i=a(68),m=a(17),u=a(66),d=Object(u.b)({name:"user",initialState:{user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,token:localStorage.getItem("token")?JSON.parse(localStorage.getItem("token")):null},reducers:{setUser:function(e,t){e.user=t.payload},setToken:function(e,t){e.token=t.payload},logout:function(e){e.user=null,e.token=null}}}),E=d.actions,p=E.setUser,g=E.setToken,f=E.logout,b=function(e){return e.user.user},h=function(e){return e.user.token},v=d.reducer;var O=function(e){var t=e.component,a=Object(i.a)(e,["component"]),n=Object(m.c)(b);return r.a.createElement(o.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(o.a,{to:"/"})}}))};var w=function(e){var t=e.component,a=Object(i.a)(e,["component"]),n=Object(m.c)(b);return r.a.createElement(o.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(o.a,{to:"/map/".concat(n._id)}):r.a.createElement(t,e)}}))},j=a(201),S=a(93),y=a.n(S);a(123);var k=function(){var e=Object(m.c)(b),t=Object(m.b)();return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header__left"},r.a.createElement("h2",null,"Travel Tracker"),r.a.createElement(y.a,null)),e?r.a.createElement(j.a,{variant:"outlined",onClick:function(){t(f()),localStorage.removeItem("user")}},"Logout"):null)},N=a(11),_=a(203),q=a(204),x=a(207),P=a(205),C=a(94),I=a.n(C),R=a(95),A=a.n(R);a(82);var F=function(e){var t=e.message;return r.a.createElement("div",null,t?r.a.createElement("p",{className:"message errorMessage"},r.a.createElement(A.a,null)," ",t):null)},J=a(38),z=a(56),T=a(36),M=T.a().shape({name:T.b().required("Name is a required field").max(32,"Name must be at most 32 characters"),email:T.b().required("Email is a required field").email("Email must be a valid email").matches(/.+\@.+\..+/,"Email must contain @").min(4,"Email must be at least 4 characters long").max(32,"Email must be at most 32 characters"),password:T.b().required("Password is a required field").min(8,"Password must be at least 8 characters long").matches(/(?=.*?[a-z])/,"Password must contain at least a lowercase letter").matches(/(?=.*?[A-Z])/,"Password must contain at least a uppercase letter").matches(/(?=.*?[0-9])/,"Password must contain at least one digit")}),L=T.a().shape({email:T.b().required("Email is a required field").email("Email must be a valid email").matches(/.+\@.+\..+/,"Email must contain @").min(4,"Email must be at least 4 characters long").max(32,"Email must be at most 32 characters"),password:T.b().required("Password is a required field").min(8,"Password must be at least 8 characters long").matches(/(?=.*?[a-z])/,"Password must contain at least a lowercase letter").matches(/(?=.*?[A-Z])/,"Password must contain at least a uppercase letter").matches(/(?=.*?[0-9])/,"Password must contain at least one digit")}),V=a(99),B=a.n(V).a.create({baseURL:"https://travel-tracker-backend.herokuapp.com/api"}),U=a(211),W=a(208),Z=a(209),K=a(212),$=a(202),D=a(57),G=a.n(D),H=a(58),Q=a.n(H),X=a(59),Y=a.n(X);a(160);var ee=function(){var e=Object(n.useState)(!1),t=Object(N.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),s=Object(N.a)(c,2),o=s[0],i=s[1],u=Object(m.b)(),d=Object(J.useForm)({resolver:Object(z.yupResolver)(L)}),E=d.register,f=d.handleSubmit,b=d.errors;return r.a.createElement("div",{className:"login"},r.a.createElement("form",{className:"login__form",onSubmit:f((function(e){i(null),B.post("/signin",e).then((function(e){var t=e.data;u(p(t.user)),u(g(t.token)),localStorage.setItem("user",JSON.stringify(t.user)),localStorage.setItem("token",JSON.stringify(t.token))})).catch((function(e){e.response?i(e.response.data.err):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)}))}))},r.a.createElement(U.a,null,r.a.createElement(W.a,{htmlFor:"login_email"},"Email"),r.a.createElement(Z.a,{id:"login_email",name:"email",inputRef:E,endAdornment:r.a.createElement(K.a,{position:"end"},r.a.createElement($.a,null,r.a.createElement(G.a,null)))}),b.email?r.a.createElement(F,{message:b.email.message}):null),r.a.createElement(U.a,null,r.a.createElement(W.a,{htmlFor:"login_password"},"Password"),r.a.createElement(Z.a,{id:"login_password",name:"password",inputRef:E,type:a?"text":"password",endAdornment:r.a.createElement(K.a,{position:"end"},r.a.createElement($.a,{onClick:function(){return l(!a)}},a?r.a.createElement(Q.a,null):r.a.createElement(Y.a,null)))}),b.password?r.a.createElement(F,{message:b.password.message}):null),r.a.createElement(j.a,{variant:"contained",color:"primary",type:"submit"},"Login"),o?r.a.createElement(F,{message:o}):null))},te=a(100),ae=a.n(te);var ne=function(e){var t=e.message;return r.a.createElement("div",null,t?r.a.createElement("p",{className:"message successMessage"},r.a.createElement(ae.a,null)," ",t):null)},re=a(101),le=a.n(re);a(169);var ce=function(){var e=Object(n.useState)(!1),t=Object(N.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),s=Object(N.a)(c,2),o=s[0],i=s[1],m=Object(n.useState)(null),u=Object(N.a)(m,2),d=u[0],E=u[1],p=Object(J.useForm)({resolver:Object(z.yupResolver)(M)}),g=p.register,f=p.handleSubmit,b=p.errors;return r.a.createElement("div",{className:"register"},r.a.createElement("form",{className:"register__form",onSubmit:f((function(e){B.post("/signup",e).then((function(e){return E("Registration was Successful")})).catch((function(e){e.response?i(e.response.data.err.split(":")[2]):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)}))}))},r.a.createElement(U.a,null,r.a.createElement(W.a,{htmlFor:"register_name"},"Name"),r.a.createElement(Z.a,{id:"register_name",name:"name",inputRef:g,endAdornment:r.a.createElement(K.a,{position:"end"},r.a.createElement($.a,null,r.a.createElement(le.a,null)))}),b.name?r.a.createElement(F,{message:b.name.message}):null),r.a.createElement(U.a,null,r.a.createElement(W.a,{htmlFor:"register_email"},"Email"),r.a.createElement(Z.a,{id:"register_email",name:"email",inputRef:g,endAdornment:r.a.createElement(K.a,{position:"end"},r.a.createElement($.a,null,r.a.createElement(G.a,null)))}),b.email?r.a.createElement(F,{message:b.email.message}):null),r.a.createElement(U.a,null,r.a.createElement(W.a,{htmlFor:"register_password"},"Password"),r.a.createElement(Z.a,{id:"register_password",name:"password",inputRef:g,type:a?"text":"password",endAdornment:r.a.createElement(K.a,{position:"end"},r.a.createElement($.a,{onClick:function(){return l(!a)}},a?r.a.createElement(Q.a,null):r.a.createElement(Y.a,null)))}),b.password?r.a.createElement(F,{message:b.password.message}):null),r.a.createElement(j.a,{variant:"contained",color:"primary",type:"submit"},"Register"),d?r.a.createElement(ne,{message:d}):null,o?r.a.createElement(F,{message:o}):null))};a(170);var se=function(){var e=Object(n.useState)(0),t=Object(N.a)(e,2),a=t[0],l=t[1];return r.a.createElement("div",{className:"dashboard"},r.a.createElement(_.a,{className:"dashboard__container"},r.a.createElement("div",{className:"dashboard__containerText"},r.a.createElement("h1",null,"Join us"),r.a.createElement("h4",null,"and have the opportunity to know how much percent you know in the world")),r.a.createElement("div",{className:"tabs"},r.a.createElement(q.a,{position:"static",color:"default"},r.a.createElement(x.a,{value:a,indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"full width tabs example"},r.a.createElement(P.a,{label:"Login",onClick:function(){return l(0)}}),r.a.createElement(P.a,{label:"Register",onClick:function(){return l(1)}}))),r.a.createElement(I.a,{index:a},r.a.createElement(ee,null),r.a.createElement(ce,null)))))},oe=a(15),ie=a.n(oe),me=a(26),ue=a(213),de=a(214),Ee=a(206),pe=a(215);a(171);var ge=function(){var e=Object(n.useState)([]),t=Object(N.a)(e,2),a=t[0],l=t[1],c=Object(m.c)(b);return Object(n.useEffect)((function(){(function(){var e=Object(me.a)(ie.a.mark((function e(){var t,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.get("https://restcountries.eu/rest/v2/all");case 2:t=e.sent,a=t.data,l(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{className:"worldMap"},r.a.createElement(ue.a,{center:{lat:34.80746,lng:-40.4796},zoom:2},r.a.createElement(de.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.map((function(e){if(e.latlng[0]&&e.latlng[1]&&c.countries.includes(e.name))return r.a.createElement(Ee.a,{key:e.alpha2Code,position:e.latlng},r.a.createElement(pe.a,null,e.name))}))),r.a.createElement("div",{className:"test"}))},fe=a(102);a(172);var be=function(){var e=Object(m.c)(b),t=Object(m.c)(h),a=Object(m.b)(),l=Object(J.useForm)().handleSubmit,c=Object(n.useState)(""),s=Object(N.a)(c,2),o=s[0],i=s[1],u=Object(n.useState)(null),d=Object(N.a)(u,2),E=d[0],g=d[1],f={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}};return r.a.createElement("form",{className:"countryVisitForm",onSubmit:l((function(){""!==o?e.countries.includes(o)?B.put("/country/".concat(e._id),{country:o},f).then((function(e){var t=e.data;a(p(t.user)),localStorage.setItem("user",JSON.stringify(t.user))})).catch((function(e){e.response?g(e.response.data.err):e.request?console.log(e.request,1):console.log("Error",e.message,2),console.log(e.config,3)})):B.post("/country/".concat(e._id),{country:o},f).then((function(e){var t=e.data;a(p(t.user)),localStorage.setItem("user",JSON.stringify(t.user))})).catch((function(e){e.response?g(e.response.data.err):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)})):g("Country must be selected")}))},r.a.createElement("h2",null,"Country Visit Form"),r.a.createElement(fe.a,{value:o,onChange:function(e){return function(e){i(e),g(null)}(e)}}),r.a.createElement(j.a,{color:"primary",variant:"contained",size:"small",type:"Submit"},e.countries.includes(o)?"Remove Visited":"Add Visited"),E?r.a.createElement(F,{message:E}):null)},he=a(210);a(173);var ve=function(){var e=Object(m.c)(b),t=Object(n.useState)(0),a=Object(N.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){c(100*e.countries.length/250)}),[e.countries]),r.a.createElement("div",{className:"worldKnow"},r.a.createElement("h2",null,"Percentage of known world"),r.a.createElement("p",null,"according to"," ",r.a.createElement("a",{rel:"noopener noreferrer",href:"https://en.wikipedia.org/wiki/ISO_3166-1#Current_codes",target:"_blank"},"ISO 3166-1")),r.a.createElement("h1",null,l," %"),r.a.createElement(he.a,{value:l}))};a(174);var Oe=function(){return r.a.createElement("div",{className:"mapPage"},r.a.createElement(ge,null),r.a.createElement("div",{className:"mapPage__rightSide"},r.a.createElement(be,null),r.a.createElement(ve,null)))};a(175);var we=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(k,null),r.a.createElement(s.a,null,r.a.createElement(o.d,null,r.a.createElement(w,{component:se,exact:!0,path:"/"}),r.a.createElement(O,{component:Oe,exact:!0,path:"/map/:userId"}))))},je=Object(u.a)({reducer:{user:v}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,{store:je},r.a.createElement(we,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},82:function(e,t,a){}},[[113,1,2]]]);
//# sourceMappingURL=main.51e2f198.chunk.js.map